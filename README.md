# SSE Utils
[![Greenkeeper badge](https://badges.greenkeeper.io/wdullaer/sse-utils.svg)](https://greenkeeper.io/)
![NPM Version](https://img.shields.io/npm/v/sse-utils.svg)
[![Build Status](https://travis-ci.org/wdullaer/sse-utils.svg?branch=master)](https://travis-ci.org/wdullaer/sse-utils)
![Dependency Status](https://david-dm.org/wdullaer/sse-utils.svg)
[![Code Climate](https://codeclimate.com/github/wdullaer/sse-utils/badges/gpa.svg)](https://codeclimate.com/github/wdullaer/sse-utils)
[![Test Coverage](https://codeclimate.com/github/wdullaer/sse-utils/badges/coverage.svg)](https://codeclimate.com/github/wdullaer/sse-utils/coverage)

This is a small package that aims to be the server sent events equivalent of the JSON built-in module.
It allows you to stringify an SSE object so it can be put on the wire.
It allows you parse a stringified SSE object (you'll normally use another library to create an SSE client, but this can be helpfull for testing purposes).

## Installation

```bash
npm install sse-utils
```

## Example

```javascript
let sse = require('sse-utils');

let input = {foo: 'bar'};
let sseString = sse.stringify(input);
console.log(sseString);
let output = sse.parse(input);
console.log(output);
```

## TODO
* Add support for asynchronous (de)serializers

## API
<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### SSEObject

**Properties**

-   `data` **any** The payload of the message
-   `id` **?[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The ID of the message (for reconnection)
-   `event` **?[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The type of event being sent

### Serializer

Custom serialization function

**Parameters**

-   `payload` **any**

Returns **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)**

### Deserializer

Custom deserialization function

**Parameters**

-   `data` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)**

Returns **any**

### stringify

Stringify the data to an SSE message

**Parameters**

-   `payload` **[SSEObject](#sseobject)** The payload of the sse message: contains data, id?, event?
-   `serializer` **?[Serializer](#serializer)** A specialized function that marshals the data into a string (optional)


-   Throws **[TypeError](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError)** Arguments should have their correct types

Returns **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The data as an SSE message

### parse

Parse an SSE message and return the data

**Parameters**

-   `sseObject` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The SSE message to parse
-   `deserializer` **?[Deserializer](#deserializer)** A specialized function to reconstruct the payload


-   Throws **[TypeError](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError)** `sseObject` should be a string including the terminating newlines

Returns **[SSEObject](#sseobject)** The data sent in this SSE message
